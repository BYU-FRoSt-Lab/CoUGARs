# Created by Nelson Durrant, Sep 2024
#
# VEHICLE-SPECIFIC ROS PARAMETER VALUES
# - When setting up a new vehicle, do not directly edit
#   the file in 'templates'; rather the copied file 
#   generated by 'setup.sh' in 'config'
# - If you edit this file, you'll need to make sure the 
#   copied file in 'config' is updated as well

# Global parameters to be used in every ros node
/**:
  ros__parameters:
    vehicle_id: 0
    
    water_salinity_ppt: 0 # 0 for fresh water, 35 for salt water
    # https://www.ngdc.noaa.gov/geomag/calculators/magcalc.shtml?
    magnetic_declination: 10.7 # E is positive, W is negative, 10.70Â° E for Utah Lake

/coug_kinematics:
  ros__parameters:
    trim_ratio: 0.0 # multiplied by the velocity
    top_fin_offset: 0.0 # offset in degrees for the top fin (from front of vehicle)
    right_fin_offset: 0.0 # offset in degrees for the right fin (from front of vehicle)
    left_fin_offset: 0.0 # offset in degrees for the left fin (from front of vehicle)

/coug_controls:
  ros__parameters:
    pid_timer_period: 80 # in ms, 80 from experimentation with the depth sensor
    depth_kp: 0.0
    depth_ki: 0.0
    depth_kd: 0.0
    depth_min_output: -25 # minimum fin angle from center (-25 from advice from NSWC PCD)
    depth_max_output: 25 # maximum fin angle from center (25 from advice from NSWC PCD)
    depth_bias: 0
    heading_kp: 0.0
    heading_ki: 0.0
    heading_kd: 0.0
    heading_min_output: -25 # minimum fin angle from center (-25 from advice from NSWC PCD)
    heading_max_output: 25 # maximum fin angle from center (25 from advice from NSWC PCD)
    heading_bias: 0

/manual_mission:
  ros__parameters:
    command_timer_period: 0.5 # in seconds
    state_1_count: 0 # time spent in state 1 (in intervals based on command_timer_period)
    state_1_depth: 0.0 # in meters (positive is deeper)
    state_1_heading: 0.0 # in degrees
    state_1_speed: 0.0 # TODO: add here
    state_2_count: 0 # time spent in state 2 (in intervals based on command_timer_period)
    state_2_depth: 0.0 # in meters (positive is deeper)
    state_2_heading: 0.0 # in degrees
    state_2_speed: 0.0 # TODO: add here
    state_3_count: 0 # time spent in state 3 (in intervals based on command_timer_period)
    state_3_depth: 0.0 # in meters (positive is deeper)
    state_3_heading: 0.0 # in degrees
    state_3_speed: 0.0 # TODO: add here

/gps_odom:
  ros__parameters:
    origin.latitude: 40.238833 # 40.2735 for Utah Lake
    origin.longitude: -111.742249 # -111.7126 for Utah Lake
    origin.altitude: 1367.00 # from testing

/gpsd_client:
  ros__parameters:
    use_gps_time: false
    check_fix_by_variance: false
    frame_id: gps
    publish_rate: 10

/depth_convertor:
  ros__parameters:
    fluid_pressure_atm: 87250.0 # 87250.0 from testing, TODO: add units

/battery_sub:
  ros__parameters:
    critical_voltage: 14.0 # shutdown voltage in volts (safety check)

